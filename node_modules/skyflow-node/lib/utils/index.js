"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getServiceAccount = getServiceAccount;
exports.getWorkspace = getWorkspace;

var _fs = _interopRequireDefault(require("fs"));

var _InvalidServiceAccount = _interopRequireDefault(require("../CustomErrors/InvalidServiceAccount"));

function getServiceAccount(serviceAccount) {
  var serviceAccountObject = serviceAccount;

  try {
    if (typeof serviceAccount === "string") {
      serviceAccountObject = JSON.parse(_fs.default.readFileSync(params.store.serviceAccountFile));
    }
  } catch (e) {
    throw new _InvalidServiceAccount.default();
  }

  return serviceAccountObject;
}

function getWorkspace(workspaceUrl) {
  var workspaceUrlAsArray = workspaceUrl.split('.');

  if (workspaceUrlAsArray.length != 5) {
    return {
      valid: false
    };
  }

  return {
    accountName: workspaceUrlAsArray[0],
    workspace: workspaceUrlAsArray[1],
    valid: true
  };
}